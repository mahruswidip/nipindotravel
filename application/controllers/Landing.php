<?php
/* 
 * Generated by CRUDigniter v3.2 
 * www.crudigniter.com
 */

class Landing extends CI_Controller
{
    function __construct()
    {
        parent::__construct();
        $this->load->model('Paket_model');
    }

    function index()
    {
        $data['paketumroh'] = $this->Paket_model->get_paket_umroh_only();
        $data['pakettour'] = $this->Paket_model->get_paket_tour_only();
        $data['pakethaji'] = $this->Paket_model->get_paket_haji_only();
        $data['galeri'] = $this->Paket_model->get_galeri_nipindo_only();
        $data['artikel'] = $this->Paket_model->get_artikel_nipindo_only();

        $data['_view'] = 'landing';
        $this->load->view('layouts/main', $data);
    }

    function detail_paket($id_paket)
    {
        // Mengambil data paket dari model (sesuaikan dengan implementasi Anda)
        $data['detail_paket'] = $this->Paket_model->get_paket($id_paket);

        // Memuat halaman detail paket
        $data['_view'] = 'paket/detail_paket.php';
        $this->load->view('layouts/main', $data);
    }

    public function search_paket()
    {
        $destinasi = $this->input->post('destinasi'); // Assuming 'destinasi' is the name attribute in your select element
        $daterange = $this->input->post('daterange');
        $daterangeexploded = explode(' - ', $daterange);

        $daterangeConverted = [
            date('Y-m-d', strtotime($daterangeexploded[0])),
            date('Y-m-d', strtotime($daterangeexploded[1]))
        ];

        $data['paketpencarian'] = $this->Paket_model->search_paket($destinasi, $daterangeConverted);

        // echo '<pre>';
        // print_r($data['paketpencarian']);
        // exit();

        // Load the view with the search results
        $data['_view'] = 'paket/pencarian';
        $this->load->view('layouts/main', $data);
    }
}
